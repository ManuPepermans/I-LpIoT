<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ElderTrack: src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ElderTrack
   &#160;<span id="projectnumber">V1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="main_8h_source.html">main.h</a>&quot;</code><br />
<code>#include &quot;stm32l1xx_hal.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.c:</div>
<div class="dyncontent">
<div class="center"><img src="main_8c__incl.png" border="0" usemap="#src_2main_8c" alt=""/></div>
<map name="src_2main_8c" id="src_2main_8c">
<area shape="rect" id="node2" href="main_8h.html" title="main.h" alt="" coords="191,80,252,107"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
main.c</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp2045016cb90d1e65d71c2407a2570927"></a>this is the main program body for the project. The major part of the code exist of a Finite State Machine (FSM):</p>
<ul>
<li>Safe Zone: The patient is in the predefined safe zone. The sensor data (barometer &amp; ecompass) are send over DASH7 and when an interrupt is received over DASH7 the state will switch to the DASH7 Downlink state.</li>
<li>DASH7 Downlink: the next state will be decided on the received message. For now only 1 type of message is supported but this will be expand in the future.</li>
<li>Danger Zone: The patient is outside the predefined safe zone. The LORA and GPS module are turned on and depending on whether the system could connect to LORA the systems goes in Alarm state or to the Lora Ready state.</li>
<li>Alarm State: If the system couldn't connect to the LORA an alarm message over DASH7 will be send and a buzzer will go off.</li>
<li>Lora Ready: LORA is ready and the GPS will be initialized.</li>
<li>Lora Sending: Sending the GPS coordinates of the patient over LORA. <div class="dotgraph">
<img src="dot_inline_dotgraph_1.png" alt="dot_inline_dotgraph_1.png" border="0" usemap="#dot_inline_dotgraph_1.map"/>
<map name="dot_inline_dotgraph_1.map" id="dot_inline_dotgraph_1.map"></map>
</div>
</li>
</ul>
<dl class="section author"><dt>Authors</dt><dd>Imad Bouhadan, Dellafaille Lander, Marien Levi, Pepermans Manu, Van de Mieroop Kevin </dd></dl>
</td></tr>
<tr class="memitem:af7b2c26e44dadaaa798a5c3d82914ba7"><td class="memItemLeft" align="right" valign="top">I2C_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af7b2c26e44dadaaa798a5c3d82914ba7">hi2c1</a></td></tr>
<tr class="separator:af7b2c26e44dadaaa798a5c3d82914ba7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c80fd5510e2990a59a5c90d745c716c"><td class="memItemLeft" align="right" valign="top">TIM_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a2c80fd5510e2990a59a5c90d745c716c">htim2</a></td></tr>
<tr class="separator:a2c80fd5510e2990a59a5c90d745c716c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e02824771dd09b2d2d2cf6dd6a6422"><td class="memItemLeft" align="right" valign="top">WWDG_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ac8e02824771dd09b2d2d2cf6dd6a6422">WwdgHandle</a></td></tr>
<tr class="separator:ac8e02824771dd09b2d2d2cf6dd6a6422"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae273feb3e0dc44e38892650faa58fced"><td class="memItemLeft" align="right" valign="top">UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ae273feb3e0dc44e38892650faa58fced">huart4</a></td></tr>
<tr class="separator:ae273feb3e0dc44e38892650faa58fced"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a82fcf0cd24eb6d39977cb5864cec8"><td class="memItemLeft" align="right" valign="top">UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a25a82fcf0cd24eb6d39977cb5864cec8">huart5</a></td></tr>
<tr class="separator:a25a82fcf0cd24eb6d39977cb5864cec8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9479c261d65eecedd3d9582f7f0f89c"><td class="memItemLeft" align="right" valign="top">UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aa9479c261d65eecedd3d9582f7f0f89c">huart2</a></td></tr>
<tr class="separator:aa9479c261d65eecedd3d9582f7f0f89c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7c63c1b0f65db92b6a4ea19edf957e1"><td class="memItemLeft" align="right" valign="top">UART_HandleTypeDef&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ab7c63c1b0f65db92b6a4ea19edf957e1">huart3</a></td></tr>
<tr class="separator:ab7c63c1b0f65db92b6a4ea19edf957e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70af21c671abfcc773614a9a4f63d920"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a70af21c671abfcc773614a9a4f63d920">SystemClock_Config</a> (void)</td></tr>
<tr class="memdesc:a70af21c671abfcc773614a9a4f63d920"><td class="mdescLeft">&#160;</td><td class="mdescRight">System clock configuration.  <a href="#a70af21c671abfcc773614a9a4f63d920">More...</a><br /></td></tr>
<tr class="separator:a70af21c671abfcc773614a9a4f63d920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae70bce6c39d0b570a7523b86738cec4b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ae70bce6c39d0b570a7523b86738cec4b">HAL_TIM_MspPostInit</a> (TIM_HandleTypeDef *htim)</td></tr>
<tr class="separator:ae70bce6c39d0b570a7523b86738cec4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main function of the program. The peripherals are initialized and than the program enters a finite state machine which was defined previously.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br /></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb040fa1f21fe8beaa31395b79ad2c70"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aeb040fa1f21fe8beaa31395b79ad2c70">initLora</a> ()</td></tr>
<tr class="memdesc:aeb040fa1f21fe8beaa31395b79ad2c70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for initializing the LORA module.  <a href="#aeb040fa1f21fe8beaa31395b79ad2c70">More...</a><br /></td></tr>
<tr class="separator:aeb040fa1f21fe8beaa31395b79ad2c70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd9b357f5633fa088f430b1535ec7a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a5dd9b357f5633fa088f430b1535ec7a7">checkNetwork</a> ()</td></tr>
<tr class="memdesc:a5dd9b357f5633fa088f430b1535ec7a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether LORA has joined the network.  <a href="#a5dd9b357f5633fa088f430b1535ec7a7">More...</a><br /></td></tr>
<tr class="separator:a5dd9b357f5633fa088f430b1535ec7a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32ee1093387dd32427afa1993789a237"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a32ee1093387dd32427afa1993789a237">loraError</a> ()</td></tr>
<tr class="memdesc:a32ee1093387dd32427afa1993789a237"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an error message over DASH7 to the backend.  <a href="#a32ee1093387dd32427afa1993789a237">More...</a><br /></td></tr>
<tr class="separator:a32ee1093387dd32427afa1993789a237"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33e3fdc8d32b79dae88725e3705b1df7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a33e3fdc8d32b79dae88725e3705b1df7">initGPS</a> ()</td></tr>
<tr class="memdesc:a33e3fdc8d32b79dae88725e3705b1df7"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialization of the GPS module  <a href="#a33e3fdc8d32b79dae88725e3705b1df7">More...</a><br /></td></tr>
<tr class="separator:a33e3fdc8d32b79dae88725e3705b1df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe60a22bd1fde3ef49c0d0aa48550687"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#afe60a22bd1fde3ef49c0d0aa48550687">BuzzerAlert</a> (void)</td></tr>
<tr class="memdesc:afe60a22bd1fde3ef49c0d0aa48550687"><td class="mdescLeft">&#160;</td><td class="mdescRight">activating buzzer  <a href="#afe60a22bd1fde3ef49c0d0aa48550687">More...</a><br /></td></tr>
<tr class="separator:afe60a22bd1fde3ef49c0d0aa48550687"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f09d12c79d6ae472d5a9dfc3eb72383"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a7f09d12c79d6ae472d5a9dfc3eb72383">resetWWDG</a> (void)</td></tr>
<tr class="memdesc:a7f09d12c79d6ae472d5a9dfc3eb72383"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset of the WWDG.  <a href="#a7f09d12c79d6ae472d5a9dfc3eb72383">More...</a><br /></td></tr>
<tr class="separator:a7f09d12c79d6ae472d5a9dfc3eb72383"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae66e69edaeef3dfa145c3b2c2480bbd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aae66e69edaeef3dfa145c3b2c2480bbd">sendGPS</a> ()</td></tr>
<tr class="memdesc:aae66e69edaeef3dfa145c3b2c2480bbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the GPS coordinates over LORA.  <a href="#aae66e69edaeef3dfa145c3b2c2480bbd">More...</a><br /></td></tr>
<tr class="separator:aae66e69edaeef3dfa145c3b2c2480bbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c28c1008f7f4ccb0cde9bfaf751171a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3c28c1008f7f4ccb0cde9bfaf751171a">DASH7Message</a> (uint8_t data[], int lengthDash7)</td></tr>
<tr class="memdesc:a3c28c1008f7f4ccb0cde9bfaf751171a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to send a DASH7 message with a variable length:  <a href="#a3c28c1008f7f4ccb0cde9bfaf751171a">More...</a><br /></td></tr>
<tr class="separator:a3c28c1008f7f4ccb0cde9bfaf751171a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b664598f235b6fe02dd6a678650384e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a7b664598f235b6fe02dd6a678650384e">getAndSendAltitude</a> ()</td></tr>
<tr class="memdesc:a7b664598f235b6fe02dd6a678650384e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the output registers of the LPS22HB sensor and sends them over DASH7.  <a href="#a7b664598f235b6fe02dd6a678650384e">More...</a><br /></td></tr>
<tr class="separator:a7b664598f235b6fe02dd6a678650384e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70b6e477a3b7d7368bd3ec443954f8a8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a70b6e477a3b7d7368bd3ec443954f8a8">LSM303AGR_readRegister</a> (uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data, uint8_t ACC_MAG)</td></tr>
<tr class="memdesc:a70b6e477a3b7d7368bd3ec443954f8a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a certain register of the LSM303AGR depending on the value of ACC_MAG:  <a href="#a70b6e477a3b7d7368bd3ec443954f8a8">More...</a><br /></td></tr>
<tr class="separator:a70b6e477a3b7d7368bd3ec443954f8a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af905db105697431457c2785252043b86"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#af905db105697431457c2785252043b86">LSM303AGR_writeRegister</a> (uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data, uint8_t ACC_MAG)</td></tr>
<tr class="memdesc:af905db105697431457c2785252043b86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a cerain value to a certain register of the LSM303AGR depending on the value of ACC_MAG:  <a href="#af905db105697431457c2785252043b86">More...</a><br /></td></tr>
<tr class="separator:af905db105697431457c2785252043b86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a808c0f0fc9b18cbecf59798027580dbc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a808c0f0fc9b18cbecf59798027580dbc">LSM303AGR_init</a> ()</td></tr>
<tr class="memdesc:a808c0f0fc9b18cbecf59798027580dbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">initialization of the LSM303AGR  <a href="#a808c0f0fc9b18cbecf59798027580dbc">More...</a><br /></td></tr>
<tr class="separator:a808c0f0fc9b18cbecf59798027580dbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa6724fb6af473e194b54c30bc9768c7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#afa6724fb6af473e194b54c30bc9768c7">LSM303AGR_ACC_readAccelerationData</a> (int32_t *pData)</td></tr>
<tr class="memdesc:afa6724fb6af473e194b54c30bc9768c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the output registers of the accelerometer.  <a href="#afa6724fb6af473e194b54c30bc9768c7">More...</a><br /></td></tr>
<tr class="separator:afa6724fb6af473e194b54c30bc9768c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a035df0b4af3eb940e008c1f65caf1fc3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a035df0b4af3eb940e008c1f65caf1fc3">LSM303AGR_MAG_readMagneticData</a> (int32_t *pData)</td></tr>
<tr class="memdesc:a035df0b4af3eb940e008c1f65caf1fc3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the output registers of the magnetometer and applies the sensitivity.  <a href="#a035df0b4af3eb940e008c1f65caf1fc3">More...</a><br /></td></tr>
<tr class="separator:a035df0b4af3eb940e008c1f65caf1fc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e52862a5f02251d2423fdaa92f7c2cb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a5e52862a5f02251d2423fdaa92f7c2cb">ecompassAlgorithm</a> ()</td></tr>
<tr class="memdesc:a5e52862a5f02251d2423fdaa92f7c2cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ecompass algorithm, it does the following:  <a href="#a5e52862a5f02251d2423fdaa92f7c2cb">More...</a><br /></td></tr>
<tr class="separator:a5e52862a5f02251d2423fdaa92f7c2cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a829116a51f1db1a72ebd1120f60719d5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a829116a51f1db1a72ebd1120f60719d5">_Error_Handler</a> (char *file, int line)</td></tr>
<tr class="memdesc:a829116a51f1db1a72ebd1120f60719d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function is executed in case of error occurrence.  <a href="#a829116a51f1db1a72ebd1120f60719d5">More...</a><br /></td></tr>
<tr class="separator:a829116a51f1db1a72ebd1120f60719d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a829116a51f1db1a72ebd1120f60719d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a829116a51f1db1a72ebd1120f60719d5">&#9670;&nbsp;</a></span>_Error_Handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void _Error_Handler </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function is executed in case of error occurrence. </p>

</div>
</div>
<a id="afe60a22bd1fde3ef49c0d0aa48550687"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe60a22bd1fde3ef49c0d0aa48550687">&#9670;&nbsp;</a></span>BuzzerAlert()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BuzzerAlert </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>activating buzzer </p>

</div>
</div>
<a id="a5dd9b357f5633fa088f430b1535ec7a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd9b357f5633fa088f430b1535ec7a7">&#9670;&nbsp;</a></span>checkNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void checkNetwork </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether LORA has joined the network. </p>

</div>
</div>
<a id="a3c28c1008f7f4ccb0cde9bfaf751171a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c28c1008f7f4ccb0cde9bfaf751171a">&#9670;&nbsp;</a></span>DASH7Message()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void DASH7Message </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>data</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lengthDash7</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to send a DASH7 message with a variable length: </p>
<ul>
<li>0x41 0x54 0x24 0x44 0xc0 0x00 0x0d</li>
<li>0xb4 0x13 0x32 0xd7 0x00 0x00 0x10 0x01 0x20 0x40</li>
<li>0x00 0x01 0x01 <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>the data to be sends. </td></tr>
    <tr><td class="paramname">lengthDash7</td><td>the length of the data to be send. </td></tr>
  </table>
  </dd>
</dl>
</li>
</ul>

</div>
</div>
<a id="a5e52862a5f02251d2423fdaa92f7c2cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e52862a5f02251d2423fdaa92f7c2cb">&#9670;&nbsp;</a></span>ecompassAlgorithm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ecompassAlgorithm </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ecompass algorithm, it does the following: </p>
<ol type="1">
<li>Read the data from the accelerometer and magnetomerer</li>
<li>Convert the data from integer to float</li>
<li>Apply the resolution on the accelerometer data</li>
<li>Calculate the phi (roll angle) value</li>
<li>Calculate the theta (pitch angle or attitude) value</li>
<li>Calculate of the Psi (yaw angle or heading) value</li>
</ol>
<dl class="section return"><dt>Returns</dt><dd>the value of the heading in uint16_t format. </dd></dl>

</div>
</div>
<a id="a7b664598f235b6fe02dd6a678650384e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b664598f235b6fe02dd6a678650384e">&#9670;&nbsp;</a></span>getAndSendAltitude()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void getAndSendAltitude </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the output registers of the LPS22HB sensor and sends them over DASH7. </p>

</div>
</div>
<a id="ae70bce6c39d0b570a7523b86738cec4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae70bce6c39d0b570a7523b86738cec4b">&#9670;&nbsp;</a></span>HAL_TIM_MspPostInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HAL_TIM_MspPostInit </td>
          <td>(</td>
          <td class="paramtype">TIM_HandleTypeDef *&#160;</td>
          <td class="paramname"><em>htim</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a33e3fdc8d32b79dae88725e3705b1df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33e3fdc8d32b79dae88725e3705b1df7">&#9670;&nbsp;</a></span>initGPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initGPS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialization of the GPS module </p>

</div>
</div>
<a id="aeb040fa1f21fe8beaa31395b79ad2c70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb040fa1f21fe8beaa31395b79ad2c70">&#9670;&nbsp;</a></span>initLora()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void initLora </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for initializing the LORA module. </p>

</div>
</div>
<a id="a32ee1093387dd32427afa1993789a237"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32ee1093387dd32427afa1993789a237">&#9670;&nbsp;</a></span>loraError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loraError </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an error message over DASH7 to the backend. </p>

</div>
</div>
<a id="afa6724fb6af473e194b54c30bc9768c7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa6724fb6af473e194b54c30bc9768c7">&#9670;&nbsp;</a></span>LSM303AGR_ACC_readAccelerationData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LSM303AGR_ACC_readAccelerationData </td>
          <td>(</td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>pData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the output registers of the accelerometer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pData</td><td>a pointer to where the data needs to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a808c0f0fc9b18cbecf59798027580dbc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a808c0f0fc9b18cbecf59798027580dbc">&#9670;&nbsp;</a></span>LSM303AGR_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LSM303AGR_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>initialization of the LSM303AGR </p>

</div>
</div>
<a id="a035df0b4af3eb940e008c1f65caf1fc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a035df0b4af3eb940e008c1f65caf1fc3">&#9670;&nbsp;</a></span>LSM303AGR_MAG_readMagneticData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LSM303AGR_MAG_readMagneticData </td>
          <td>(</td>
          <td class="paramtype">int32_t *&#160;</td>
          <td class="paramname"><em>pData</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the output registers of the magnetometer and applies the sensitivity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pData</td><td>a pointer to where the data needs to be stored </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a70b6e477a3b7d7368bd3ec443954f8a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70b6e477a3b7d7368bd3ec443954f8a8">&#9670;&nbsp;</a></span>LSM303AGR_readRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LSM303AGR_readRegister </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>LSM303AGR_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>LSM303AGR_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ACC_MAG</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a certain register of the LSM303AGR depending on the value of ACC_MAG: </p>
<ul>
<li>if this value is 0: read out a register of the accelerometer</li>
<li>if this value is 1: read out a register of the magnetormeter The standard HAL library values are used for the size of the register and time-out. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LSM303AGR_reg</td><td>the register that needs to be read of the LSM303AGR </td></tr>
    <tr><td class="paramname">LSM303AGR_data</td><td>a pointer where the data of the register needs to be stored </td></tr>
    <tr><td class="paramname">ACC_MAG</td><td>depending on the value a value a register of the accelerometer of magnetometer are read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the status of the I2C transfer </dd></dl>
</li>
</ul>

</div>
</div>
<a id="af905db105697431457c2785252043b86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af905db105697431457c2785252043b86">&#9670;&nbsp;</a></span>LSM303AGR_writeRegister()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void LSM303AGR_writeRegister </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>LSM303AGR_reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>LSM303AGR_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>ACC_MAG</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a cerain value to a certain register of the LSM303AGR depending on the value of ACC_MAG: </p>
<ul>
<li>if this value is 0: write to a register of the accelerometer<ul>
<li>if this value is 1: write to a register of the magnetormeter the standard HAL library values are used for the size of the register and time-out. <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LSM303AGR_reg</td><td>the register where data needs to be written to </td></tr>
    <tr><td class="paramname">LSM303AGR_data</td><td>a pointer to the data that needs to be written </td></tr>
    <tr><td class="paramname">ACC_MAG</td><td>depending on the value, a write is performed to the accelerometer of magnetometer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>returns the status of the I2C transfer </dd></dl>
</li>
</ul>
</li>
</ul>

</div>
</div>
<a id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a840291bc02cba5474a4cb46a9b9566fe">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main function of the program. The peripherals are initialized and than the program enters a finite state machine which was defined previously. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a7f09d12c79d6ae472d5a9dfc3eb72383"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f09d12c79d6ae472d5a9dfc3eb72383">&#9670;&nbsp;</a></span>resetWWDG()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void resetWWDG </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs a reset of the WWDG. </p>

</div>
</div>
<a id="aae66e69edaeef3dfa145c3b2c2480bbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae66e69edaeef3dfa145c3b2c2480bbd">&#9670;&nbsp;</a></span>sendGPS()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sendGPS </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the GPS coordinates over LORA. </p>

</div>
</div>
<a id="a70af21c671abfcc773614a9a4f63d920"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70af21c671abfcc773614a9a4f63d920">&#9670;&nbsp;</a></span>SystemClock_Config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void SystemClock_Config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System clock configuration. </p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="af7b2c26e44dadaaa798a5c3d82914ba7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7b2c26e44dadaaa798a5c3d82914ba7">&#9670;&nbsp;</a></span>hi2c1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I2C_HandleTypeDef hi2c1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2c80fd5510e2990a59a5c90d745c716c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c80fd5510e2990a59a5c90d745c716c">&#9670;&nbsp;</a></span>htim2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TIM_HandleTypeDef htim2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa9479c261d65eecedd3d9582f7f0f89c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9479c261d65eecedd3d9582f7f0f89c">&#9670;&nbsp;</a></span>huart2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UART_HandleTypeDef huart2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab7c63c1b0f65db92b6a4ea19edf957e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7c63c1b0f65db92b6a4ea19edf957e1">&#9670;&nbsp;</a></span>huart3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UART_HandleTypeDef huart3</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ae273feb3e0dc44e38892650faa58fced"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae273feb3e0dc44e38892650faa58fced">&#9670;&nbsp;</a></span>huart4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UART_HandleTypeDef huart4</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a25a82fcf0cd24eb6d39977cb5864cec8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a82fcf0cd24eb6d39977cb5864cec8">&#9670;&nbsp;</a></span>huart5</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UART_HandleTypeDef huart5</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac8e02824771dd09b2d2d2cf6dd6a6422"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8e02824771dd09b2d2d2cf6dd6a6422">&#9670;&nbsp;</a></span>WwdgHandle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">WWDG_HandleTypeDef WwdgHandle</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
