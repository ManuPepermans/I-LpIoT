<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ElderTrack: include/main.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ElderTrack
   &#160;<span id="projectnumber">V1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">main.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="main_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">/* Define to prevent recursive inclusion -------------------------------------*/</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="preprocessor">#ifndef __MAIN_H</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#define __MAIN_H</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">/* Includes -------------------------------------*/</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;stm32l1xx_hal.h&quot;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/* Defines for the main body -------------------------------------*/</span></div><div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="main_8h.html#af17a94dd613cff35c699b06c7c6a2820">   20</a></span>&#160;<span class="preprocessor">#define LD2_Pin GPIO_PIN_5</span></div><div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="main_8h.html#a5aff6ddf7fe557e53b048115ad322aa0">   21</a></span>&#160;<span class="preprocessor">#define LD2_GPIO_Port GPIOA</span></div><div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="main_8h.html#a12f4b06f41b00f7ebc72d87b813771cb">   22</a></span>&#160;<span class="preprocessor">#define LENGTH_ARRAY(x)  (sizeof(x) / sizeof(uint8_t))</span></div><div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="main_8h.html#aae3f0b4211ba45d265973d40ccbb5fd1">   23</a></span>&#160;<span class="preprocessor">#define SERIAL 7</span></div><div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="main_8h.html#aeca034f67218340ecb2261a22c2f3dcd">   24</a></span>&#160;<span class="preprocessor">#define BUFSIZE 200</span></div><div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="main_8h.html#af3cc4ba42efb48f16226cb5ba77c1bbb">   25</a></span>&#160;<span class="preprocessor">#define CMD_LENGTH 19</span></div><div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="main_8h.html#a69629b77e517daf716c92ad1f8418558">   26</a></span>&#160;<span class="preprocessor">#define FRAME_LENGTH</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">/* Function prototypes -------------------------------------*/</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a266cca25ee33056d256fa45d4feb9df1">sendGPS</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#aeb040fa1f21fe8beaa31395b79ad2c70">initLora</a>();</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#af8869b293257f1db78cb7cdf58118dd3">initGPS</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#aca5a2e8d5f9d501a02b2b4b47cf0420d">DASH7Message</a>(uint8_t[], <span class="keywordtype">int</span>);</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a9c8c590ea687d83078aff761b5e127ad">loraError</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a406262acc6d97125e0c198f09c056ebf">checkNetwork</a>(<span class="keywordtype">void</span>);</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/* Variables used in the main body -------------------------------------*/</span></div><div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="main_8h.html#a1062901a7428fdd9c7f180f5e01ea056">   37</a></span>&#160;<span class="keyword">typedef</span> <span class="keywordtype">int</span> <a class="code" href="main_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a>;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00039"></a><span class="lineno"><a class="line" href="main_8h.html#a06fc87d81c62e9abb8790b6e5713c55ba08f175a5505a10b9ed657defeb050e4b">   39</a></span>&#160;<span class="keyword">false</span>, <span class="keyword">true</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;};</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677">   42</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> {</div><div class="line"><a name="l00043"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2d2eed9814cf89fd6e7b6425332323ad">   43</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2d2eed9814cf89fd6e7b6425332323ad">in_danger_zone</a>,</div><div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a36440c4c16e179841e08794c4bd844fe">   44</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a36440c4c16e179841e08794c4bd844fe">lora_ready</a>,</div><div class="line"><a name="l00045"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2c0343378e79c2be325ae3afe2a7cc25">   45</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2c0343378e79c2be325ae3afe2a7cc25">no_lora</a>,</div><div class="line"><a name="l00046"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677ac1e01c6e18855771278dceb9481593fb">   46</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677ac1e01c6e18855771278dceb9481593fb">safe_zone</a>,</div><div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a63a336428685560fe7f3df10a5347c60">   47</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a63a336428685560fe7f3df10a5347c60">alarm_state</a>,</div><div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2817f408193b093ec462099faca79063">   48</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2817f408193b093ec462099faca79063">lora_sending</a>,</div><div class="line"><a name="l00049"></a><span class="lineno"><a class="line" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a0c7cc29ca86d11239f9946052c280b4b">   49</a></span>&#160;<a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a0c7cc29ca86d11239f9946052c280b4b">dash7_downlink</a></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;};</div><div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="main_8h.html#aa56f777b40743798ee0726ba4ded17a9">   51</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a> <a class="code" href="main_8h.html#aa56f777b40743798ee0726ba4ded17a9">state</a>;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//global variables</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//bool dangerZone;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">//bool loraJoined;</span></div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="main_8h.html#abf57a39dbdaf3b28f473eaa206a57774">   56</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="main_8h.html#abf57a39dbdaf3b28f473eaa206a57774">loraTries</a>;</div><div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="main_8h.html#a09183ef3537a2e40a3036d9a59f41404">   57</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="main_8h.html#a09183ef3537a2e40a3036d9a59f41404">lora_gps_powered</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">/* LPS22HB -------------------------------------*/</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="main_8h.html#ab540e0484a514a159c506ecb16e04509">   60</a></span>&#160;<span class="preprocessor">#define LPS22HB_BARO_ADDRESS 0xBA // ADRESS from the barometer  &quot;10111010&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="main_8h.html#abfc51eb5d86d4ac7c35345b5a827c533">   61</a></span>&#160;<span class="preprocessor">#define LPS22HB_AWHO_AM_I 0x0F</span></div><div class="line"><a name="l00062"></a><span class="lineno"><a class="line" href="main_8h.html#a1aaa66a1a998d2e174d3855b144cdd6a">   62</a></span>&#160;<span class="preprocessor">#define LPS22HB_CTRL_REG2 0x11</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="main_8h.html#a595385cbd537baba98e651cffcf71d9a">   63</a></span>&#160;<span class="preprocessor">#define LPS22HB_PRESS_OUT_XL 0x28   // Pressure output value (LSB)</span></div><div class="line"><a name="l00064"></a><span class="lineno"><a class="line" href="main_8h.html#a10f555434c76079e60ea268dcb6b46a5">   64</a></span>&#160;<span class="preprocessor">#define LPS22HB_OUT_L 0x29          // Pressure output value (mid part)</span></div><div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="main_8h.html#a8de1e230bcb1279308dcf4321edb7be5">   65</a></span>&#160;<span class="preprocessor">#define LPS22HB_OUT_H 0x2A          // Pressure output value (MSB)</span></div><div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="main_8h.html#a392c496620149880c24e1c513c6a4129">   66</a></span>&#160;<span class="preprocessor">#define LPS22HB_TEMP_OUT_L 0x2B     // Temperature output value (LSB)</span></div><div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="main_8h.html#a4c32aac0b220f3b61c1cf6f59bed76f4">   67</a></span>&#160;<span class="preprocessor">#define LPS22HB_TEMP_OUT_H 0x2C     // Temperature output value (MSB)</span></div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="main_8h.html#ada680d47f630ade30ef640e75cb73977">   68</a></span>&#160;<span class="preprocessor">#define LPS22HB_ONE__SHOT_ENABLE 0x11 // 0001 0001</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="main_8h.html#a045e87d64e4c09e7d750921acf9f7efe">   70</a></span>&#160;uint8_t <a class="code" href="main_8h.html#a045e87d64e4c09e7d750921acf9f7efe">Data</a>[6];</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="main_8h.html#accae60ffc689c59ace75342db5197400">   71</a></span>&#160;uint8_t <a class="code" href="main_8h.html#accae60ffc689c59ace75342db5197400">LSBpressure</a>;</div><div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="main_8h.html#ade446f7be5778b91aa9c0485128dbab3">   72</a></span>&#160;uint8_t <a class="code" href="main_8h.html#ade446f7be5778b91aa9c0485128dbab3">MIDpressure</a>;</div><div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="main_8h.html#a0210ae08866a2b8e618e04b9aa84c0a7">   73</a></span>&#160;uint8_t <a class="code" href="main_8h.html#a0210ae08866a2b8e618e04b9aa84c0a7">MSBpressure</a>;</div><div class="line"><a name="l00074"></a><span class="lineno"><a class="line" href="main_8h.html#a3dc2965d8afb9f9d911252d04335c7fb">   74</a></span>&#160;uint8_t <a class="code" href="main_8h.html#a3dc2965d8afb9f9d911252d04335c7fb">MSBtemp</a>;</div><div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="main_8h.html#a62b76495b9fa5fbacf43bbdaa820ea3f">   75</a></span>&#160;uint8_t <a class="code" href="main_8h.html#a62b76495b9fa5fbacf43bbdaa820ea3f">LSBtemp</a>;</div><div class="line"><a name="l00076"></a><span class="lineno"><a class="line" href="main_8h.html#a51c33f9c2a0a2ef0caef0766c8d43698">   76</a></span>&#160;uint32_t <a class="code" href="main_8h.html#a51c33f9c2a0a2ef0caef0766c8d43698">CompletePressure</a>;</div><div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="main_8h.html#a6bd95140398cc8f4b44157b17d6ba31e">   77</a></span>&#160;uint16_t <a class="code" href="main_8h.html#a6bd95140398cc8f4b44157b17d6ba31e">temperature</a>;</div><div class="line"><a name="l00078"></a><span class="lineno"><a class="line" href="main_8h.html#aea9b009ea54d2d0b1d3c36614ea53606">   78</a></span>&#160;uint8_t <a class="code" href="main_8h.html#aea9b009ea54d2d0b1d3c36614ea53606">Settings</a>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a7b664598f235b6fe02dd6a678650384e">getAndSendAltitude</a>();</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/* LSM303AGR -------------------------------------*/</span></div><div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="main_8h.html#a598a3330b3c21701223ee0ca14316eca">   83</a></span>&#160;<span class="preprocessor">#define PI 3.14159265359</span></div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="main_8h.html#a518902ce4d6b0c41b04e9fcd3c648916">   84</a></span>&#160;<span class="preprocessor">#define resolution 8</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">/*LSM303AGR i2c addresses*/</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">//Transformed in 8-bit form</span></div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="main_8h.html#ae5d71a093759ebf000e012d00bb4ce7e">   88</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_I2C_ADDRESS 0x32</span></div><div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="main_8h.html#afd8ccae527a8027c37a7b42bcec8a0a9">   89</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_I2C_ADDRESS 0x3c</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">/*LSM303AGR register map*/</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">//LSM303AGR Accelerometer</span></div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="main_8h.html#a540c4f91073325efd7f389f1fcce34ae">   93</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_WHO_AM_I_REG      0x0F</span></div><div class="line"><a name="l00094"></a><span class="lineno"><a class="line" href="main_8h.html#a33ed4268c6e0ada69b86e14f538361ae">   94</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_CTRL_REG1         0x20</span></div><div class="line"><a name="l00095"></a><span class="lineno"><a class="line" href="main_8h.html#a042fd60350cd76a26b9528500ee7f118">   95</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_CTRL_REG4         0x23</span></div><div class="line"><a name="l00096"></a><span class="lineno"><a class="line" href="main_8h.html#a40fcb41ae945d7e6f7dda4dc42699464">   96</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_CTRL_REG5         0x24</span></div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="main_8h.html#aa6aa018c169f83a72027d8ead54024d4">   97</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_STATUS_REG        0x27</span></div><div class="line"><a name="l00098"></a><span class="lineno"><a class="line" href="main_8h.html#a17b0c575d40e759c56f365ff59fcbbfb">   98</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_X_L           0x28</span></div><div class="line"><a name="l00099"></a><span class="lineno"><a class="line" href="main_8h.html#a6d4130e4489a46f105f3b02699eac824">   99</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_X_H           0x29</span></div><div class="line"><a name="l00100"></a><span class="lineno"><a class="line" href="main_8h.html#a74a46c825a72bed0561d6e73c205200b">  100</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_Y_L           0x2A</span></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="main_8h.html#ae981a696a2d906bac6f0e7d48fa7a60d">  101</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_Y_H           0x2B</span></div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="main_8h.html#aa22a6b8df1f1a1a1b91f89c6de19ec27">  102</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_Z_L           0x2C</span></div><div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="main_8h.html#a219113375f70a584e6dbeaf021fcc5ef">  103</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_OUT_Z_H           0x2D</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="main_8h.html#a3221f985bb46943ed09aeeceb9819f4f">  104</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_MULTI_READ        (LSM303AGR_ACC_OUT_X_L | 0x80)</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">//LSM303AGR Magnetometer</span></div><div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="main_8h.html#a0bbc57c758b0ef2cfb40af010a3189e3">  107</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_X_REG_L    0x45</span></div><div class="line"><a name="l00108"></a><span class="lineno"><a class="line" href="main_8h.html#aa1fc54c7016a48ac48d9645650d3641a">  108</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_X_REG_H    0x46</span></div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="main_8h.html#afe4a24c261ff8836c50d8d1e59196ccb">  109</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_Y_REG_L    0x47</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="main_8h.html#a470794d9ab41de37524c993990b8faa9">  110</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_Y_REG_H    0x48</span></div><div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="main_8h.html#a260293578a559f17f4e2704efac4f412">  111</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_Z_REG_L    0x49</span></div><div class="line"><a name="l00112"></a><span class="lineno"><a class="line" href="main_8h.html#a563a2b2304e2d65f3a9995eefd34c9ae">  112</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFFSET_Z_REG_H    0x4A</span></div><div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="main_8h.html#a255c43c2ef9a0f2a592e0692f281b90c">  113</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_WHO_AM_I          0x4F</span></div><div class="line"><a name="l00114"></a><span class="lineno"><a class="line" href="main_8h.html#a8650ed45e862d3d33cd0a3892837c1cc">  114</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_CFG_REG_A         0x60</span></div><div class="line"><a name="l00115"></a><span class="lineno"><a class="line" href="main_8h.html#a59589378bfee18f918f69081349f9ead">  115</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_CFG_REG_B         0x61</span></div><div class="line"><a name="l00116"></a><span class="lineno"><a class="line" href="main_8h.html#a0faa2b24dec3293949431be188cd358a">  116</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_CFG_REG_C         0x62</span></div><div class="line"><a name="l00117"></a><span class="lineno"><a class="line" href="main_8h.html#a0427da79e3947d2823037d2b683fbd4b">  117</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_STATUS            0x67</span></div><div class="line"><a name="l00118"></a><span class="lineno"><a class="line" href="main_8h.html#a7d383121f3c4c68a1af5ad075434eaa1">  118</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTX_L            0x68</span></div><div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="main_8h.html#a50c46dd29bdaf1b629257342b9e94ece">  119</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTX_H            0x69</span></div><div class="line"><a name="l00120"></a><span class="lineno"><a class="line" href="main_8h.html#a674513d36e01950d39a25b2aacc3f83a">  120</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTY_L            0x6A</span></div><div class="line"><a name="l00121"></a><span class="lineno"><a class="line" href="main_8h.html#a9ab8bd5ec6e09cfd32e5b367184f28e3">  121</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTY_H            0x6B</span></div><div class="line"><a name="l00122"></a><span class="lineno"><a class="line" href="main_8h.html#a271acb84b75bff0a725227d6426d57c3">  122</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTZ_L            0x6C</span></div><div class="line"><a name="l00123"></a><span class="lineno"><a class="line" href="main_8h.html#a5d3132b0c895f036628f400ba4859b50">  123</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OUTZ_H            0x6D</span></div><div class="line"><a name="l00124"></a><span class="lineno"><a class="line" href="main_8h.html#add2d817c059ee13dce2d487b2702163d">  124</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_MULTI_READ        (LSM303AGR_MAG_OUTX_L | 0x80)</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">/*LSM303AGR settings*/</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">//LSM303AGR Accelerometer</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">//CTRL_REG_1 (0x20)</span></div><div class="line"><a name="l00129"></a><span class="lineno"><a class="line" href="main_8h.html#a2532a8a9b2893af89e4398c80e08c8a9">  129</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_ODR_POWERDOWN     0x00</span></div><div class="line"><a name="l00130"></a><span class="lineno"><a class="line" href="main_8h.html#a35fc9a75e97432e23113ef1b69630896">  130</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_ODR_1HZ           0x10</span></div><div class="line"><a name="l00131"></a><span class="lineno"><a class="line" href="main_8h.html#a0440346f72acd02507e892fbdce981e6">  131</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_ODR_10HZ          0x20</span></div><div class="line"><a name="l00132"></a><span class="lineno"><a class="line" href="main_8h.html#a06f6bf019db9fb278e9f2faef8273e03">  132</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_Z_EN              0x04</span></div><div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="main_8h.html#a44dea58466ceacb39e3f0360bba24bcd">  133</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_Y_EN              0x02</span></div><div class="line"><a name="l00134"></a><span class="lineno"><a class="line" href="main_8h.html#a74f5cb3f53b5267c41120ce8d7e8240f">  134</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_X_EN              0x01</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//CTRL_REG_4 (0x23)</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="main_8h.html#a512eef3f2369d51ebc1547c9743d3a38">  136</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_BDU_EN            0x80</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">//CTRL_REG5 (0x24)</span></div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="main_8h.html#a8e807914348c031157663576fe33563f">  138</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_BOOT              0x80</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">//LSM303AGR Magnetometer</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">//CFG_REG_A_M (0x60)</span></div><div class="line"><a name="l00142"></a><span class="lineno"><a class="line" href="main_8h.html#a6069501bfbf9eeab43c89a88a52b688b">  142</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_COMP_TEMP_EN      0x80</span></div><div class="line"><a name="l00143"></a><span class="lineno"><a class="line" href="main_8h.html#a3c3a583737107a3823a95e663f72e7c8">  143</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_SOFT_RST          0x20</span></div><div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="main_8h.html#a7f3f62b14e608e95cb01ad38702b6e5b">  144</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_LP_EN             0x10</span></div><div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="main_8h.html#ae3191b5b7365892d3445ebc3e88daab1">  145</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_ODR_10HZ          0x00</span></div><div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="main_8h.html#a6fc77f480ba4507dacdd251d3d701576">  146</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_MD_CONT           0x00</span></div><div class="line"><a name="l00147"></a><span class="lineno"><a class="line" href="main_8h.html#ae4679f9cfdaeae23c1cb37b3b381bbbb">  147</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_MD_SIGNLE         0x01</span></div><div class="line"><a name="l00148"></a><span class="lineno"><a class="line" href="main_8h.html#a62c9b052503fbce10c5b9693472aec46">  148</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_MD_IDLE           0x02</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">//CFG_REG_B_M</span></div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="main_8h.html#aabb15930b52e6846c6d026d6f81bab4e">  150</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFF_CANC_ONE_SHOT 0x10</span></div><div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="main_8h.html#a73e517a53061fc573e4823669ee2093b">  151</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_OFF_CANC          0x02</span></div><div class="line"><a name="l00152"></a><span class="lineno"><a class="line" href="main_8h.html#ab0458b7e65f1539021600780f8083bf6">  152</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_LPF               0x01</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">//CFG_REG_C_M</span></div><div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="main_8h.html#ae81982d2079edebe728ac27ff0d1c1f0">  154</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_BDU               0x10</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">/*LSM303 WHO_AM_I response*/</span></div><div class="line"><a name="l00157"></a><span class="lineno"><a class="line" href="main_8h.html#ab6b9bb0e75df01f4217f59afd585d997">  157</a></span>&#160;<span class="preprocessor">#define LSM303AGR_ACC_WHO_AM_I_RSP      0x33</span></div><div class="line"><a name="l00158"></a><span class="lineno"><a class="line" href="main_8h.html#ac783dcd959fd54205bd6e4f5368a64b1">  158</a></span>&#160;<span class="preprocessor">#define LSM303AGR_MAG_WHO_AM_I_RSP      0x40</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a.html">  160</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a.html#a2e4fddf404108f1d61b680198ba1f090">  161</a></span>&#160;uint8_t registerData[6];</div><div class="line"><a name="l00162"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a.html#a316d9a754794bf8deb7a25922fa4b8cb">  162</a></span>&#160;int16_t rawData[3];</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;} <a class="code" href="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a.html">LSM303AGR_ACC_TEMP_DATA</a>;</div><div class="line"><a name="l00164"></a><span class="lineno"><a class="line" href="main_8h.html#ab00858042d3712fdf84dca221d0a9923">  164</a></span>&#160;int32_t <a class="code" href="main_8h.html#ab00858042d3712fdf84dca221d0a9923">accData</a>[3];</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a.html">  166</a></span>&#160;<span class="keyword">typedef</span> <span class="keyword">union </span>{</div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a.html#a670be29cfbb59af94ef8ab6ad8c9b39b">  167</a></span>&#160;uint8_t registerData[6];</div><div class="line"><a name="l00168"></a><span class="lineno"><a class="line" href="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a.html#ac3be84a1d6a31ce00eb648a3b844cdf0">  168</a></span>&#160;int16_t rawData[3];</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;} <a class="code" href="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a.html">LSM303AGR_MAG_TEMP_DATA</a>;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="main_8h.html#a1adee729ef306cbd253e13f52757e955">  171</a></span>&#160;uint8_t <a class="code" href="main_8h.html#a1adee729ef306cbd253e13f52757e955">LSM303AGR_setting</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="main_8h.html#aee3888afaca84cef6247141f1ce3d04a">  173</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#aee3888afaca84cef6247141f1ce3d04a">lsm303agrAccDataTemp</a>;</div><div class="line"><a name="l00174"></a><span class="lineno"><a class="line" href="main_8h.html#ac4722dca2ee10c0385be08850723b3fc">  174</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#ac4722dca2ee10c0385be08850723b3fc">rollRad</a>;</div><div class="line"><a name="l00175"></a><span class="lineno"><a class="line" href="main_8h.html#abdb3b0c52b436d502b38b26bd1b871ff">  175</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#abdb3b0c52b436d502b38b26bd1b871ff">rollDegree</a>;</div><div class="line"><a name="l00176"></a><span class="lineno"><a class="line" href="main_8h.html#a906bba231f020212ae25d07e63913bad">  176</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#a906bba231f020212ae25d07e63913bad">pitchRad</a>;</div><div class="line"><a name="l00177"></a><span class="lineno"><a class="line" href="main_8h.html#ac1eb6c5c8e98196fa712a34c8278dbda">  177</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#ac1eb6c5c8e98196fa712a34c8278dbda">pitchDegree</a>;</div><div class="line"><a name="l00178"></a><span class="lineno"><a class="line" href="main_8h.html#a27d8e2c8bca0890efe2bf64fdb4f6ed6">  178</a></span>&#160;int32_t <a class="code" href="main_8h.html#a27d8e2c8bca0890efe2bf64fdb4f6ed6">lsm303agrAccData</a>[3];</div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="main_8h.html#a756a5355cc723c285bfbf68a579389fd">  179</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#a756a5355cc723c285bfbf68a579389fd">lsm303agrAccDataFloat</a>[3];</div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="main_8h.html#af81ba485476c26ff76dc3a75e1881e0f">  180</a></span>&#160;int32_t <a class="code" href="main_8h.html#af81ba485476c26ff76dc3a75e1881e0f">lsm303agrMagData</a>[3];</div><div class="line"><a name="l00181"></a><span class="lineno"><a class="line" href="main_8h.html#ac183530767b30cd6835ecb4fefa21a66">  181</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#ac183530767b30cd6835ecb4fefa21a66">lsm303agrMagDataFloat</a>[3];</div><div class="line"><a name="l00182"></a><span class="lineno"><a class="line" href="main_8h.html#a8d274e0675936fa20b09bb338ee610b9">  182</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#a8d274e0675936fa20b09bb338ee610b9">yawTemp</a>[3];</div><div class="line"><a name="l00183"></a><span class="lineno"><a class="line" href="main_8h.html#a5501dfebb1ddbd0a10ae85b4f139977f">  183</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#a5501dfebb1ddbd0a10ae85b4f139977f">yawRad</a>;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="main_8h.html#a57d91bb32b0f9d721e59f75166c67835">  184</a></span>&#160;<span class="keywordtype">float</span> <a class="code" href="main_8h.html#a57d91bb32b0f9d721e59f75166c67835">yawDegree</a>;</div><div class="line"><a name="l00185"></a><span class="lineno"><a class="line" href="main_8h.html#af837e47fd1c617a3b5c153ed8657323e">  185</a></span>&#160;uint16_t <a class="code" href="main_8h.html#af837e47fd1c617a3b5c153ed8657323e">dir</a>;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a70b6e477a3b7d7368bd3ec443954f8a8">LSM303AGR_readRegister</a>(uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    uint8_t ACC_MAG);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#af905db105697431457c2785252043b86">LSM303AGR_writeRegister</a>(uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    uint8_t ACC_MAG);</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a808c0f0fc9b18cbecf59798027580dbc">LSM303AGR_init</a>();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#afa6724fb6af473e194b54c30bc9768c7">LSM303AGR_ACC_readAccelerationData</a>(int32_t *pData);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a035df0b4af3eb940e008c1f65caf1fc3">LSM303AGR_MAG_readMagneticData</a>(int32_t *pData);</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#ae40c558cd76aaccb9c0e64fcce424c1c">LSM303AGR_MAG_readMagneticRawData</a>(int16_t *pData);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a5e52862a5f02251d2423fdaa92f7c2cb">ecompassAlgorithm</a>();</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span> {</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="keywordtype">void</span> <a class="code" href="main_8h.html#a47642651029b93e3f9c9edad46bd27b4">_Error_Handler</a>(<span class="keywordtype">char</span> *, <span class="keywordtype">int</span>);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno"><a class="line" href="main_8h.html#a5593abbf196bdbd410b0939ef878b9d1">  202</a></span>&#160;<span class="preprocessor">#define Error_Handler() _Error_Handler(__FILE__, __LINE__)</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="preprocessor">#ifdef __cplusplus</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;}</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* __MAIN_H */</span><span class="preprocessor"></span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/************************ (C) COPYRIGHT STMicroelectronics *****END OF FILE****/</span></div><div class="ttc" id="main_8h_html_a406262acc6d97125e0c198f09c056ebf"><div class="ttname"><a href="main_8h.html#a406262acc6d97125e0c198f09c056ebf">checkNetwork</a></div><div class="ttdeci">void checkNetwork(void)</div><div class="ttdoc">Check whether LORA has joined the network. </div><div class="ttdef"><b>Definition:</b> main.c:306</div></div>
<div class="ttc" id="main_8h_html_af837e47fd1c617a3b5c153ed8657323e"><div class="ttname"><a href="main_8h.html#af837e47fd1c617a3b5c153ed8657323e">dir</a></div><div class="ttdeci">uint16_t dir</div><div class="ttdef"><b>Definition:</b> main.h:185</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a63a336428685560fe7f3df10a5347c60"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a63a336428685560fe7f3df10a5347c60">alarm_state</a></div><div class="ttdef"><b>Definition:</b> main.h:47</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a2d2eed9814cf89fd6e7b6425332323ad"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2d2eed9814cf89fd6e7b6425332323ad">in_danger_zone</a></div><div class="ttdef"><b>Definition:</b> main.h:43</div></div>
<div class="ttc" id="main_8h_html_a47642651029b93e3f9c9edad46bd27b4"><div class="ttname"><a href="main_8h.html#a47642651029b93e3f9c9edad46bd27b4">_Error_Handler</a></div><div class="ttdeci">void _Error_Handler(char *, int)</div><div class="ttdoc">This function is executed in case of error occurrence. </div><div class="ttdef"><b>Definition:</b> main.c:970</div></div>
<div class="ttc" id="main_8h_html_abf57a39dbdaf3b28f473eaa206a57774"><div class="ttname"><a href="main_8h.html#abf57a39dbdaf3b28f473eaa206a57774">loraTries</a></div><div class="ttdeci">int loraTries</div><div class="ttdef"><b>Definition:</b> main.h:56</div></div>
<div class="ttc" id="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a_html"><div class="ttname"><a href="union_l_s_m303_a_g_r___a_c_c___t_e_m_p___d_a_t_a.html">LSM303AGR_ACC_TEMP_DATA</a></div><div class="ttdef"><b>Definition:</b> main.h:160</div></div>
<div class="ttc" id="main_8h_html_aee3888afaca84cef6247141f1ce3d04a"><div class="ttname"><a href="main_8h.html#aee3888afaca84cef6247141f1ce3d04a">lsm303agrAccDataTemp</a></div><div class="ttdeci">float lsm303agrAccDataTemp</div><div class="ttdef"><b>Definition:</b> main.h:173</div></div>
<div class="ttc" id="main_8h_html_a09183ef3537a2e40a3036d9a59f41404"><div class="ttname"><a href="main_8h.html#a09183ef3537a2e40a3036d9a59f41404">lora_gps_powered</a></div><div class="ttdeci">bool lora_gps_powered</div><div class="ttdef"><b>Definition:</b> main.h:57</div></div>
<div class="ttc" id="main_8h_html_a62b76495b9fa5fbacf43bbdaa820ea3f"><div class="ttname"><a href="main_8h.html#a62b76495b9fa5fbacf43bbdaa820ea3f">LSBtemp</a></div><div class="ttdeci">uint8_t LSBtemp</div><div class="ttdef"><b>Definition:</b> main.h:75</div></div>
<div class="ttc" id="main_8h_html_a808c0f0fc9b18cbecf59798027580dbc"><div class="ttname"><a href="main_8h.html#a808c0f0fc9b18cbecf59798027580dbc">LSM303AGR_init</a></div><div class="ttdeci">void LSM303AGR_init()</div><div class="ttdoc">initialization of the LSM303AGR </div><div class="ttdef"><b>Definition:</b> main.c:577</div></div>
<div class="ttc" id="main_8h_html_a51c33f9c2a0a2ef0caef0766c8d43698"><div class="ttname"><a href="main_8h.html#a51c33f9c2a0a2ef0caef0766c8d43698">CompletePressure</a></div><div class="ttdeci">uint32_t CompletePressure</div><div class="ttdef"><b>Definition:</b> main.h:76</div></div>
<div class="ttc" id="main_8h_html_ade446f7be5778b91aa9c0485128dbab3"><div class="ttname"><a href="main_8h.html#ade446f7be5778b91aa9c0485128dbab3">MIDpressure</a></div><div class="ttdeci">uint8_t MIDpressure</div><div class="ttdef"><b>Definition:</b> main.h:72</div></div>
<div class="ttc" id="main_8h_html_aea9b009ea54d2d0b1d3c36614ea53606"><div class="ttname"><a href="main_8h.html#aea9b009ea54d2d0b1d3c36614ea53606">Settings</a></div><div class="ttdeci">uint8_t Settings</div><div class="ttdef"><b>Definition:</b> main.h:78</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a36440c4c16e179841e08794c4bd844fe"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a36440c4c16e179841e08794c4bd844fe">lora_ready</a></div><div class="ttdef"><b>Definition:</b> main.h:44</div></div>
<div class="ttc" id="main_8h_html_a27d8e2c8bca0890efe2bf64fdb4f6ed6"><div class="ttname"><a href="main_8h.html#a27d8e2c8bca0890efe2bf64fdb4f6ed6">lsm303agrAccData</a></div><div class="ttdeci">int32_t lsm303agrAccData[3]</div><div class="ttdef"><b>Definition:</b> main.h:178</div></div>
<div class="ttc" id="main_8h_html_a5e52862a5f02251d2423fdaa92f7c2cb"><div class="ttname"><a href="main_8h.html#a5e52862a5f02251d2423fdaa92f7c2cb">ecompassAlgorithm</a></div><div class="ttdeci">void ecompassAlgorithm()</div><div class="ttdoc">The ecompass algorithm, it does the following: </div><div class="ttdef"><b>Definition:</b> main.c:668</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a0c7cc29ca86d11239f9946052c280b4b"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a0c7cc29ca86d11239f9946052c280b4b">dash7_downlink</a></div><div class="ttdef"><b>Definition:</b> main.h:49</div></div>
<div class="ttc" id="main_8h_html_a0210ae08866a2b8e618e04b9aa84c0a7"><div class="ttname"><a href="main_8h.html#a0210ae08866a2b8e618e04b9aa84c0a7">MSBpressure</a></div><div class="ttdeci">uint8_t MSBpressure</div><div class="ttdef"><b>Definition:</b> main.h:73</div></div>
<div class="ttc" id="main_8h_html_a8d274e0675936fa20b09bb338ee610b9"><div class="ttname"><a href="main_8h.html#a8d274e0675936fa20b09bb338ee610b9">yawTemp</a></div><div class="ttdeci">float yawTemp[3]</div><div class="ttdef"><b>Definition:</b> main.h:182</div></div>
<div class="ttc" id="main_8h_html_a045e87d64e4c09e7d750921acf9f7efe"><div class="ttname"><a href="main_8h.html#a045e87d64e4c09e7d750921acf9f7efe">Data</a></div><div class="ttdeci">uint8_t Data[6]</div><div class="ttdef"><b>Definition:</b> main.h:70</div></div>
<div class="ttc" id="main_8h_html_ac4722dca2ee10c0385be08850723b3fc"><div class="ttname"><a href="main_8h.html#ac4722dca2ee10c0385be08850723b3fc">rollRad</a></div><div class="ttdeci">float rollRad</div><div class="ttdef"><b>Definition:</b> main.h:174</div></div>
<div class="ttc" id="main_8h_html_a906bba231f020212ae25d07e63913bad"><div class="ttname"><a href="main_8h.html#a906bba231f020212ae25d07e63913bad">pitchRad</a></div><div class="ttdeci">float pitchRad</div><div class="ttdef"><b>Definition:</b> main.h:176</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a2817f408193b093ec462099faca79063"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2817f408193b093ec462099faca79063">lora_sending</a></div><div class="ttdef"><b>Definition:</b> main.h:48</div></div>
<div class="ttc" id="main_8h_html_a3dc2965d8afb9f9d911252d04335c7fb"><div class="ttname"><a href="main_8h.html#a3dc2965d8afb9f9d911252d04335c7fb">MSBtemp</a></div><div class="ttdeci">uint8_t MSBtemp</div><div class="ttdef"><b>Definition:</b> main.h:74</div></div>
<div class="ttc" id="main_8h_html_a6bd95140398cc8f4b44157b17d6ba31e"><div class="ttname"><a href="main_8h.html#a6bd95140398cc8f4b44157b17d6ba31e">temperature</a></div><div class="ttdeci">uint16_t temperature</div><div class="ttdef"><b>Definition:</b> main.h:77</div></div>
<div class="ttc" id="main_8h_html_a5501dfebb1ddbd0a10ae85b4f139977f"><div class="ttname"><a href="main_8h.html#a5501dfebb1ddbd0a10ae85b4f139977f">yawRad</a></div><div class="ttdeci">float yawRad</div><div class="ttdef"><b>Definition:</b> main.h:183</div></div>
<div class="ttc" id="main_8h_html_a7b664598f235b6fe02dd6a678650384e"><div class="ttname"><a href="main_8h.html#a7b664598f235b6fe02dd6a678650384e">getAndSendAltitude</a></div><div class="ttdeci">void getAndSendAltitude()</div><div class="ttdoc">Reads the output registers of the LPS22HB sensor and sends them over DASH7. </div><div class="ttdef"><b>Definition:</b> main.c:493</div></div>
<div class="ttc" id="main_8h_html_a266cca25ee33056d256fa45d4feb9df1"><div class="ttname"><a href="main_8h.html#a266cca25ee33056d256fa45d4feb9df1">sendGPS</a></div><div class="ttdeci">void sendGPS(void)</div><div class="ttdoc">Sends the GPS coordinates over LORA. </div><div class="ttdef"><b>Definition:</b> main.c:416</div></div>
<div class="ttc" id="main_8h_html_a70b6e477a3b7d7368bd3ec443954f8a8"><div class="ttname"><a href="main_8h.html#a70b6e477a3b7d7368bd3ec443954f8a8">LSM303AGR_readRegister</a></div><div class="ttdeci">void LSM303AGR_readRegister(uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data, uint8_t ACC_MAG)</div><div class="ttdoc">Read a certain register of the LSM303AGR depending on the value of ACC_MAG: </div><div class="ttdef"><b>Definition:</b> main.c:534</div></div>
<div class="ttc" id="main_8h_html_ac183530767b30cd6835ecb4fefa21a66"><div class="ttname"><a href="main_8h.html#ac183530767b30cd6835ecb4fefa21a66">lsm303agrMagDataFloat</a></div><div class="ttdeci">float lsm303agrMagDataFloat[3]</div><div class="ttdef"><b>Definition:</b> main.h:181</div></div>
<div class="ttc" id="main_8h_html_ab00858042d3712fdf84dca221d0a9923"><div class="ttname"><a href="main_8h.html#ab00858042d3712fdf84dca221d0a9923">accData</a></div><div class="ttdeci">int32_t accData[3]</div><div class="ttdef"><b>Definition:</b> main.h:164</div></div>
<div class="ttc" id="main_8h_html_accae60ffc689c59ace75342db5197400"><div class="ttname"><a href="main_8h.html#accae60ffc689c59ace75342db5197400">LSBpressure</a></div><div class="ttdeci">uint8_t LSBpressure</div><div class="ttdef"><b>Definition:</b> main.h:71</div></div>
<div class="ttc" id="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a_html"><div class="ttname"><a href="union_l_s_m303_a_g_r___m_a_g___t_e_m_p___d_a_t_a.html">LSM303AGR_MAG_TEMP_DATA</a></div><div class="ttdef"><b>Definition:</b> main.h:166</div></div>
<div class="ttc" id="main_8h_html_af905db105697431457c2785252043b86"><div class="ttname"><a href="main_8h.html#af905db105697431457c2785252043b86">LSM303AGR_writeRegister</a></div><div class="ttdeci">void LSM303AGR_writeRegister(uint8_t LSM303AGR_reg, uint8_t LSM303AGR_data, uint8_t ACC_MAG)</div><div class="ttdoc">Writes a cerain value to a certain register of the LSM303AGR depending on the value of ACC_MAG: ...</div><div class="ttdef"><b>Definition:</b> main.c:559</div></div>
<div class="ttc" id="main_8h_html_a57d91bb32b0f9d721e59f75166c67835"><div class="ttname"><a href="main_8h.html#a57d91bb32b0f9d721e59f75166c67835">yawDegree</a></div><div class="ttdeci">float yawDegree</div><div class="ttdef"><b>Definition:</b> main.h:184</div></div>
<div class="ttc" id="main_8h_html_aeb040fa1f21fe8beaa31395b79ad2c70"><div class="ttname"><a href="main_8h.html#aeb040fa1f21fe8beaa31395b79ad2c70">initLora</a></div><div class="ttdeci">void initLora()</div><div class="ttdoc">Function for initializing the LORA module. </div><div class="ttdef"><b>Definition:</b> main.c:252</div></div>
<div class="ttc" id="main_8h_html_a035df0b4af3eb940e008c1f65caf1fc3"><div class="ttname"><a href="main_8h.html#a035df0b4af3eb940e008c1f65caf1fc3">LSM303AGR_MAG_readMagneticData</a></div><div class="ttdeci">void LSM303AGR_MAG_readMagneticData(int32_t *pData)</div><div class="ttdoc">Reads the output registers of the magnetometer and applies the sensitivity. </div><div class="ttdef"><b>Definition:</b> main.c:635</div></div>
<div class="ttc" id="main_8h_html_af8869b293257f1db78cb7cdf58118dd3"><div class="ttname"><a href="main_8h.html#af8869b293257f1db78cb7cdf58118dd3">initGPS</a></div><div class="ttdeci">void initGPS(void)</div><div class="ttdoc">initialization of the GPS module </div><div class="ttdef"><b>Definition:</b> main.c:352</div></div>
<div class="ttc" id="main_8h_html_a1adee729ef306cbd253e13f52757e955"><div class="ttname"><a href="main_8h.html#a1adee729ef306cbd253e13f52757e955">LSM303AGR_setting</a></div><div class="ttdeci">uint8_t LSM303AGR_setting</div><div class="ttdef"><b>Definition:</b> main.h:171</div></div>
<div class="ttc" id="main_8h_html_afa6724fb6af473e194b54c30bc9768c7"><div class="ttname"><a href="main_8h.html#afa6724fb6af473e194b54c30bc9768c7">LSM303AGR_ACC_readAccelerationData</a></div><div class="ttdeci">void LSM303AGR_ACC_readAccelerationData(int32_t *pData)</div><div class="ttdoc">Reads the output registers of the accelerometer. </div><div class="ttdef"><b>Definition:</b> main.c:608</div></div>
<div class="ttc" id="main_8h_html_aa56f777b40743798ee0726ba4ded17a9"><div class="ttname"><a href="main_8h.html#aa56f777b40743798ee0726ba4ded17a9">state</a></div><div class="ttdeci">enum states state</div><div class="ttdef"><b>Definition:</b> main.h:51</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677ac1e01c6e18855771278dceb9481593fb"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677ac1e01c6e18855771278dceb9481593fb">safe_zone</a></div><div class="ttdef"><b>Definition:</b> main.h:46</div></div>
<div class="ttc" id="main_8h_html_af81ba485476c26ff76dc3a75e1881e0f"><div class="ttname"><a href="main_8h.html#af81ba485476c26ff76dc3a75e1881e0f">lsm303agrMagData</a></div><div class="ttdeci">int32_t lsm303agrMagData[3]</div><div class="ttdef"><b>Definition:</b> main.h:180</div></div>
<div class="ttc" id="main_8h_html_a756a5355cc723c285bfbf68a579389fd"><div class="ttname"><a href="main_8h.html#a756a5355cc723c285bfbf68a579389fd">lsm303agrAccDataFloat</a></div><div class="ttdeci">float lsm303agrAccDataFloat[3]</div><div class="ttdef"><b>Definition:</b> main.h:179</div></div>
<div class="ttc" id="main_8h_html_a1062901a7428fdd9c7f180f5e01ea056"><div class="ttname"><a href="main_8h.html#a1062901a7428fdd9c7f180f5e01ea056">bool</a></div><div class="ttdeci">int bool</div><div class="ttdef"><b>Definition:</b> main.h:37</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677">states</a></div><div class="ttdeci">states</div><div class="ttdef"><b>Definition:</b> main.h:42</div></div>
<div class="ttc" id="main_8h_html_a9c8c590ea687d83078aff761b5e127ad"><div class="ttname"><a href="main_8h.html#a9c8c590ea687d83078aff761b5e127ad">loraError</a></div><div class="ttdeci">void loraError(void)</div><div class="ttdoc">Sends an error message over DASH7 to the backend. </div><div class="ttdef"><b>Definition:</b> main.c:342</div></div>
<div class="ttc" id="main_8h_html_ae40c558cd76aaccb9c0e64fcce424c1c"><div class="ttname"><a href="main_8h.html#ae40c558cd76aaccb9c0e64fcce424c1c">LSM303AGR_MAG_readMagneticRawData</a></div><div class="ttdeci">void LSM303AGR_MAG_readMagneticRawData(int16_t *pData)</div></div>
<div class="ttc" id="main_8h_html_ac1eb6c5c8e98196fa712a34c8278dbda"><div class="ttname"><a href="main_8h.html#ac1eb6c5c8e98196fa712a34c8278dbda">pitchDegree</a></div><div class="ttdeci">float pitchDegree</div><div class="ttdef"><b>Definition:</b> main.h:177</div></div>
<div class="ttc" id="main_8h_html_abdb3b0c52b436d502b38b26bd1b871ff"><div class="ttname"><a href="main_8h.html#abdb3b0c52b436d502b38b26bd1b871ff">rollDegree</a></div><div class="ttdeci">float rollDegree</div><div class="ttdef"><b>Definition:</b> main.h:175</div></div>
<div class="ttc" id="main_8h_html_aca5a2e8d5f9d501a02b2b4b47cf0420d"><div class="ttname"><a href="main_8h.html#aca5a2e8d5f9d501a02b2b4b47cf0420d">DASH7Message</a></div><div class="ttdeci">void DASH7Message(uint8_t[], int)</div><div class="ttdoc">Function to send a DASH7 message with a variable length: </div><div class="ttdef"><b>Definition:</b> main.c:467</div></div>
<div class="ttc" id="main_8h_html_aa19be6305a5a4485e1e70de70ed7d677a2c0343378e79c2be325ae3afe2a7cc25"><div class="ttname"><a href="main_8h.html#aa19be6305a5a4485e1e70de70ed7d677a2c0343378e79c2be325ae3afe2a7cc25">no_lora</a></div><div class="ttdef"><b>Definition:</b> main.h:45</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
